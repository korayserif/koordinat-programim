# netlify.toml

[functions]
  directory = "netlify/functions"```

### AdÄ±m 4: `index.html` DosyasÄ±nÄ± GÃ¼ncelleme

Åimdi `index.html` dosyanÄ±zdaki `sendVerificationCode` JavaScript fonksiyonunu, `formspree` veya eski mantÄ±k yerine bizim Netlify fonksiyonumuzu Ã§aÄŸÄ±racak ÅŸekilde deÄŸiÅŸtirelim.

AÅŸaÄŸÄ±daki fonksiyonu bulun ve **tamamen deÄŸiÅŸtirin**:

```javascript
// ESKÄ° HALÄ° (SÄ°LÄ°NECEK)
// async function sendVerificationCode() { ... }

// YENÄ° HALÄ° (BUNU KULLANIN)
async function sendVerificationCode() {
    const email = document.getElementById('emailInput').value.trim();
    if (!email) {
        alert('E-mail adresinizi girin!');
        document.getElementById('emailInput').focus();
        return;
    }

    const emailBtn = document.getElementById('emailBtn');
    emailBtn.disabled = true;
    emailBtn.innerHTML = 'ğŸ“§ GÃ¶nderiliyor...';

    try {
        // Bizim gÃ¼venli Netlify fonksiyonumuza istek gÃ¶nderiyoruz
        const response = await fetch('/.netlify/functions/send-email', {
            method: 'POST',
            body: JSON.stringify({ email: email }),
            headers: { 'Content-Type': 'application/json' }
        });

        const result = await response.json();

        if (!response.ok || !result.success) {
            // EÄŸer fonksiyon hata dÃ¶ndÃ¼rÃ¼rse
            throw new Error(result.message || 'Sunucuda bir hata oluÅŸtu.');
        }

        // Fonksiyondan gelen doÄŸrulama kodunu deÄŸiÅŸkene ata
        currentVerificationCode = result.code;
        verificationEmail = email;

        // ArayÃ¼zÃ¼ gÃ¼ncelle
        document.getElementById('emailCode').style.display = 'block';
        document.getElementById('emailStatus').style.display = 'block';
        document.getElementById('codeTimer').style.display = 'block';
        
        emailBtn.innerHTML = 'âœ“ Kodu DoÄŸrula';
        emailBtn.onclick = verifyEmailCode;
        emailBtn.disabled = false;

        startTimer(300);
        document.getElementById('emailCode').focus();

    } catch (error) {
        console.error('E-mail gÃ¶nderme hatasÄ±:', error);
        alert(`âš ï¸ E-mail gÃ¶nderimi baÅŸarÄ±sÄ±z oldu: ${error.message}`);
        emailBtn.innerHTML = 'ğŸ“§ Kod GÃ¶nder';
        emailBtn.disabled = false;
    }
}